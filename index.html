<!DOCTYPE html>
<html>
<head>
    <title>Osman's War IO - EAN Map Edition</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; font-family: sans-serif; }
        canvas { display: block; }
        #radar { position: fixed; top: 10px; right: 10px; width: 180px; height: 180px; background: rgba(0,0,0,0.7); border: 2px solid #555; }
        #ui { position: fixed; top: 10px; left: 10px; color: white; text-shadow: 2px 2px 2px black; }
    </style>
</head>
<body>

<div id="ui">
    <div id="name">Oyuncu: Osman</div>
    <div id="lives">Can: 3</div>
    <div id="xp">XP: 0</div>
    <div id="pos">Konum: 5000, 5000</div>
</div>

<div id="radar"><canvas id="radarCanvas" width="180" height="180"></canvas></div>
<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const rCanvas = document.getElementById('radarCanvas');
const rCtx = rCanvas.getContext('2d');

const MAP_SIZE = 10000;
const CENTER = MAP_SIZE / 2;
const ELMAS_RADIUS = 1200; // En içteki E bölgesi
const ALTIN_RADIUS = 3500;  // Orta halka A bölgesi
// Geri kalanı N bölgesi

let pos = { x: 5000, y: 5000 };
let worldObjects = [];

// --- GÖRSELLER ---
// NORMAL (N) - Eskiler
const imgN = { para: new Image(), disli: new Image(), kasa: new Image(), jen: new Image() };
imgN.para.src = "ESKI_PARA_LINK"; // Buraya mevcut metal para linkini koy
imgN.disli.src = "ESKI_TESTERE_LINK";
imgN.kasa.src = "ESKI_KASA_LINK";
imgN.jen.src = "ESKI_JEN_LINK";

// ALTIN (A) - Senin attığın linkler
const imgA = { para: new Image(), disli: new Image(), kasa: new Image() };
imgA.para.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpjNy8OW8lhUhtntVy_-jPuOBWpyLxzXb-tr5NIwpvqg&s=10";
imgA.disli.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgefH-j_ZZP5JOOMPZoGjRRxInLmLVHvM6kovKdjYgDw&s";
imgA.kasa.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRl4BxM22-TpThY7qwhHN3wcJ-ddm5yhJgzcrw_-_knnA&s=10";

// --- HARİTA OLUŞTURMA ---
function spawnWorld() {
    for(let i=0; i<3000; i++) {
        let rx = Math.random() * MAP_SIZE;
        let ry = Math.random() * MAP_SIZE;
        let dist = Math.hypot(rx - CENTER, ry - CENTER);
        
        let tier = "N";
        if(dist < ELMAS_RADIUS) tier = "E";
        else if(dist < ALTIN_RADIUS) tier = "A";

        const r = Math.random();
        let kind = "PARA";
        if(r > 0.96) kind = "JEN";
        else if(r > 0.90) kind = "KASA";
        else if(r > 0.75) kind = "DISLI";

        worldObjects.push({ x: rx, y: ry, kind: kind, tier: tier, id: i });
    }
}

// --- ÇİZİM ---
function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    let camX = pos.x - canvas.width / 2;
    let camY = pos.y - canvas.height / 2;

    worldObjects.forEach(obj => {
        let img;
        ctx.save();
        
        if(obj.tier === "A") {
            // ALTIN BÖLGESİ
            if(obj.kind === "JEN") {
                ctx.filter = "sepia(1) saturate(10) brightness(1.2) drop-shadow(0 0 15px gold)";
                img = imgN.jen;
            } else {
                img = imgA[obj.kind.toLowerCase()];
            }
        } else if(obj.tier === "E") {
            // ELMAS BÖLGESİ (Mavi Efekt)
            ctx.filter = "hue-rotate(180deg) brightness(1.5) drop-shadow(0 0 20px cyan)";
            img = imgN[obj.kind.toLowerCase()];
        } else {
            // NORMAL BÖLGE
            img = imgN[obj.kind.toLowerCase()];
        }

        let size = obj.kind === "JEN" ? 350 : (obj.kind === "KASA" ? 150 : 80);
        if(img && img.complete) {
            ctx.drawImage(img, obj.x - camX, obj.y - camY, size, size);
        }
        ctx.restore();
    });

    updateRadar();
    requestAnimationFrame(draw);
}

function updateRadar() {
    rCtx.clearRect(0,0,180,180);
    // Bölgeleri radarda göster
    rCtx.fillStyle = "rgba(0, 255, 255, 0.2)"; // Elmas (Merkez)
    rCtx.beginPath(); rCtx.arc(90, 90, (ELMAS_RADIUS/MAP_SIZE)*180, 0, Math.PI*2); rCtx.fill();
    
    rCtx.strokeStyle = "gold"; // Altın Sınırı
    rCtx.beginPath(); rCtx.arc(90, 90, (ALTIN_RADIUS/MAP_SIZE)*180, 0, Math.PI*2); rCtx.stroke();

    // Senin yerin
    rCtx.fillStyle = "white";
    rCtx.fillRect((pos.x/MAP_SIZE)*180 - 2, (pos.y/MAP_SIZE)*180 - 2, 4, 4);
}

window.addEventListener('resize', () => {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
spawnWorld();
draw();
</script>
</body>
</html>
