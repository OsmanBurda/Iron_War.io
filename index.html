<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Osman's War IO - EAN Edition</title>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; font-family: 'Arial', sans-serif; }
        canvas { display: block; }
        #ui { position: fixed; top: 10px; left: 10px; color: white; pointer-events: none; }
        #radar { position: fixed; top: 10px; right: 10px; width: 180px; height: 180px; background: rgba(0,0,0,0.8); border: 2px solid #444; border-radius: 5px; }
    </style>
</head>
<body>

<div id="ui">
    <div style="font-size: 20px; font-weight: bold;">Oyuncu: Osman</div>
    <div id="livesDisplay">Can: 3</div>
    <div id="xpDisplay">XP: 0</div>
</div>

<div id="radar"><canvas id="radarCanvas" width="180" height="180"></canvas></div>
<canvas id="gameCanvas"></canvas>

<script src="/socket.io/socket.io.js"></script>
<script>
const socket = io();
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const rCanvas = document.getElementById('radarCanvas');
const rCtx = rCanvas.getContext('2d');

// --- GÖRSELLER ---

// 1. Normal (N) - Eski Gri Görsellerin
const imgN = {
    para: new Image(), disli: new Image(), kasa: new Image(), jen: new Image()
};
imgN.para.src = "ESKI_PARA_LINK"; 
imgN.disli.src = "ESKI_TESTERE_LINK";
imgN.kasa.src = "ESKI_KASA_LINK";
imgN.jen.src = "ESKI_JEN_LINK";

// 2. Altın (A) - Senin Attığın Linkler
const imgA = {
    para: new Image(), disli: new Image(), kasa: new Image()
};
imgA.para.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQpjNy8OW8lhUhtntVy_-jPuOBWpyLxzXb-tr5NIwpvqg&s=10";
imgA.disli.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgefH-j_ZZP5JOOMPZoGjRRxInLmLVHvM6kovKdjYgDw&s";
imgA.kasa.src = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRl4BxM22-TpThY7qwhHN3wcJ-ddm5yhJgzcrw_-_knnA&s=10";

// --- OYUN DEĞİŞKENLERİ ---
let myPos = { x: 5000, y: 5000 };
let worldObjects = [];
const MAP_SIZE = 10000;

socket.on('init', (data) => {
    worldObjects = data.objects;
});

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    const
